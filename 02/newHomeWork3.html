<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="../static/images/fly2.ico" type="image/x-icon"/><!--网页栏图标-->
    <title>作业1-3</title>

</head>
<body>
<div id="canvas-container" style="width: 850px; height: 600px;">
    <input type="button" onclick="getTime_1()" value="sin(x)"/>
    <input type="button" onclick="getTime_2()" value="2sin(x)"/>
    <input type="button" onclick="getTime_3()" value="3sin(x)"/>
    <input type="button" onclick="getTime_1_2()" value="sin(x/2)"/>
    <input type="button" onclick="getTime2()" value="sin(2x)"/>
    <canvas id="sineCanvas" style="width: 850px; height: 600px;" width="850" height="600" >
    </canvas>

</div>

</body>

<script type="text/javascript">
    //画竖线

    var unit = 50; //幅度
    var freq = 1; //频率
    function getTime_1() {
        unit = 50;
        freq = 1;
    }
    function getTime_2() {
        unit = 50*2;
        freq = 1;
    }
    function getTime_3() {
        unit = 50*3;
        freq = 1;
    }

    function getTime_1_2() {
        unit = 50;//恢复初始sin(x)
        freq = 0.5;
    }

    function getTime2() {
        unit = 50;
        freq = 2;
    }

    var c = document.getElementById("sineCanvas");
    var context = c.getContext("2d");
    var i=1;

    function drawAxis() {
        for(var x=0.5;x< 801;x += 10){
            context.moveTo(x,0);
            context.lineTo(x,700);
        }

        for(var y=0.5;y< 701;y += 10){//画横线
            context.moveTo(0,y);
            context.lineTo(800,y);
        }
        context.strokeStyle = "#ccc";//选择颜色
        context.stroke();//渲染

        //XY坐标系
        //开始新的路径
        context.beginPath();//y轴
        context.moveTo(100,700);
        context.lineTo(100,10);
        context.moveTo(90,20);
        context.lineTo(100,10);
        context.lineTo(110,20);

        context.moveTo(700,300);//x轴
        context.lineTo(0,300);
        context.moveTo(690,290);
        context.lineTo(700,300);
        context.lineTo(690,310);

        context.strokeStyle = "#000";//选择颜色
        context.stroke();//渲染
        //填充文字
        context.font = "bold 16px sans-self";
        context.fillText("x",700,290);
        context.fillText("y",86,32);
        context.fillText("0",80,320);

        context.moveTo(100+Math.PI*50,300);
        context.lineTo(100+Math.PI*50,290);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("π",100+Math.PI*50,320);

        context.moveTo(100+2*Math.PI*50,300);
        context.lineTo(100+2*Math.PI*50,290);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("2π",100+2*Math.PI*50,320);

        context.moveTo(100+3*Math.PI*50,300);
        context.lineTo(100+3*Math.PI*50,290);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("3π",100+3*Math.PI*50,320);

        context.moveTo(100,300-50);
        context.lineTo(110,300-50);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("1",86,300-50);

        context.moveTo(100,300-100);
        context.lineTo(110,300-100);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("2",86,300-100);

        context.moveTo(100,300-150);
        context.lineTo(110,300-150);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("3",86,300-150);

        context.moveTo(100,300+50);
        context.lineTo(110,300+50);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("-1",77,300+50);

        context.moveTo(100,300+100);
        context.lineTo(110,300+100);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("-2",77,300+100);

        context.moveTo(100,300+150);
        context.lineTo(110,300+150);
        context.strokeStyle = "#000";
        context.stroke();
        context.fillText("-3",77,300+150);
    }

    (function () {
        continue_sin();
    })();

    function continue_sin() {
        if (typeof (Humble) == 'undefined') window.Humble = {};
        Humble.Trig = {};
        Humble.Trig.init = init;

        var canvas, context,
            height, width, xAxis, yAxis,
            draw;

        function init() {
            canvas = document.getElementById("sineCanvas");
            canvas.width = 850;
            canvas.height = 600;
            context = canvas.getContext("2d");
            context.font = '18px sans-serif';
            context.strokeStyle = '#000';
            context.lineJoin = 'round';
            height = canvas.height;
            width = canvas.width;
            xAxis = Math.floor(height / 2);//y高度初始出现位置
            yAxis = Math.floor(10);//x初始出现位置
            context.save();
            draw();
        }
        /**
         * Draw animation function.
         *
         * This function draws one frame of the animation, waits 20ms, and then calls
         * itself again.
         */
        draw = function () {
            // Clear the canvas
            context.clearRect(0, 0, width, height);
            // Draw the axes in their own path
            context.beginPath();

            drawAxis();//画坐标
            context.save();
            context.strokeStyle = '#0000FF';
            context.fillStyle = '#fff';
            context.lineWidth = 2;
            // Draw the sine curve at time draw.t, as well as the circle.
            context.beginPath();
            drawSine(draw.t);
            context.stroke();
            context.restore();

            //context.fillText("t = " + Math.floor(Math.abs(draw.seconds)), 150, 20);//时间显示
            draw.seconds = draw.seconds - .007;
            draw.t = draw.seconds * Math.PI;
            setTimeout(draw, 35);
        };

        draw.seconds = 0;
        draw.t = 0;

        function drawSine(t) {
            // Set the initial x and y, starting at 0,0 and translating to the origin on
            // the canvas.
            var x = t;
            var y = Math.sin(x * freq);
            context.moveTo(yAxis, unit * y + xAxis);
            // Loop to draw segments
            for (i = yAxis; i <= 625; i += 10) { //控制多少周期
                x = t + (-yAxis + i) / unit;
                y = Math.sin(x * freq);
                context.lineTo(i, unit * y + xAxis);
            }
        }
        Humble.Trig.init();
    }


</script>

</html>